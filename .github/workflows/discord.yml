name: Discord notification

on:
  push:
  pull_request:

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send Discord webhook
        run: |
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d '{
              "username": "${{ github.actor }}",
              "avatar_url": "https://github.com/${{ github.actor }}.png",
              "content": "${{ github.event_name }}\n\nâ€¢  [${{ github.actor }}](https://github.com/${{ github.actor }}) on [${{ github.event.repository.name }}](${{ github.server_url }}/${{ github.repository }})/[${{ github.ref_name }}](${{ github.server_url }}/${{ github.repository }}/tree/${{ github.ref_name }})"
            }'
